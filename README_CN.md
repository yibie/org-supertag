# Org-SuperTag 

> **âš ï¸ é‡è¦æç¤ºï¼ˆ5.3.0 åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰**
> å¦‚æœä½ æ˜¯ä» 5.2.0 ä¹‹å‰çš„ç‰ˆæœ¬å‡çº§ï¼Œè¯·åœ¨å¯ç”¨ `supertag-use-global-fields` ä¹‹å‰ï¼Œ**å…ˆå®Œæˆæ•°æ®åº“å…¨å±€å­—æ®µè¿ç§»**ã€‚
> å…·ä½“æ­¥éª¤è§ `doc/GLOBAL-FIELD-MIGRATION-GUIDE_CN.md`ã€‚
>
> **ğŸ†• æ–°åŠŸèƒ½ï¼ˆ5.3.0ï¼‰ï¼š** å±æ€§è½¬å­—æ®µè¿ç§»ç³»ç»Ÿ
> å°†ç°æœ‰çš„ Org `:PROPERTIES:` è½¬æ¢ä¸ºç»“æ„åŒ–çš„æ•°æ®åº“å­—æ®µï¼Œå®ç°æ›´å¥½çš„æŸ¥è¯¢å’Œè‡ªåŠ¨åŒ–ã€‚
> è¯¦è§ä¸‹æ–¹çš„"å±æ€§è½¬å­—æ®µè¿ç§»"éƒ¨åˆ†ã€‚

[English](./README.md) | [ä¸­æ–‡](./README_CN.md)

## âš¡ ä»‹ç»

Org-SuperTag æ˜¯ä¸€ä¸ªé¢å‘ Org çš„â€œæ•°æ®ä¼˜å…ˆâ€å·¥ä½œæµï¼šæŠŠ `#tag` å½“æˆè¡¨ï¼ŒæŠŠæ ‡é¢˜å½“æˆè®°å½•ã€‚

- **çº¯ Emacs Lisp**ï¼šæ—  Python/EPCï¼ŒåŠ è½½å³ç”¨
- **ç»“æ„åŒ–æ•°æ®**ï¼šæ ‡é¢˜ä¸Šçš„ `#tag` + å­—æ®µï¼ˆå¯æŸ¥è¯¢ã€å¯è‡ªåŠ¨åŒ–ï¼‰
- **æœ¬åœ°æ•°æ®åº“**ï¼šå†…å­˜ store + è½ç›˜æŒä¹…åŒ–ï¼ˆè¯»å†™å¿«ï¼‰
- **åŒæ­¥æœåŠ¡**ï¼šå¢é‡åŒæ­¥ + å®‰å…¨æŠ¤æ  + è¯Šæ–­å·¥å…·
- **è§†å›¾ä¸äº¤äº’**ï¼šèŠ‚ç‚¹è§†å›¾ã€è¡¨æ ¼è§†å›¾ã€çœ‹æ¿ï¼ˆæ›´åƒâ€œæ•°æ®åº“è§†å›¾â€ï¼‰
- **è‡ªåŠ¨åŒ–**ï¼šå­—æ®µå˜æ›´è§¦å‘è§„åˆ™ï¼Œä¿æŒå…ƒæ•°æ®ä¸€è‡´
- **å¯é€‰ Vault éš”ç¦»**ï¼šæ¯ä¸ªåŒæ­¥ç›®å½•ç‹¬ç«‹ DB/stateï¼ˆå•æ´»è·ƒ Vaultï¼‰

## ğŸš€ 30 ç§’ä¸Šæ‰‹

é…ç½®ç¬”è®°ä»“åº“ï¼Œæ”¯æŒå¤šç¬”è®°ä»“åº“â€”â€”

```emacs-lisp
;; å®‰è£…
(straight-use-package '(org-supertag :host github :repo "yibie/org-supertag"))

;; é…ç½®ç›®å½•
;; å• Vaultï¼ˆæ¨èï¼‰
(setq org-supertag-sync-directories '("~/org/"))

;; å¤š Vaultï¼ˆæ¯ä¸ªç›®å½•ç‹¬ç«‹ DB/stateï¼‰
;; (setq org-supertag-sync-directories '("~/org/" "~/work-notes/"))
;; (setq org-supertag-sync-directories-mode 'vaults)

;; åˆå§‹åŒ–ï¼ˆä»…ä¸€æ¬¡ï¼‰
M-x supertag-sync-full-initialize
```

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

ä¼ ç»Ÿæ ‡ç­¾ï¼š`#tag`  
SuperTagï¼š`#tag` + ç»“æ„åŒ–æ•°æ®

```org
* é¡¹ç›®è®¡åˆ’ #project
  - status: planning
  - priority: high
  - due: 2024-12-31
```

## ğŸ“‹ å¸¸ç”¨å‘½ä»¤

- `M-x supertag-add-tag` - æ·»åŠ æ ‡ç­¾
- `M-x supertag-view-node` - æŸ¥çœ‹èŠ‚ç‚¹è¯¦æƒ…
- `M-x supertag-search` - æ™ºèƒ½æœç´¢
- `M-x supertag-capture` - å¿«é€Ÿæ•è·
- `M-x supertag-view-kanban` - çœ‹æ¿è§†å›¾

## ğŸ” æŸ¥è¯¢ç¤ºä¾‹

```lisp
;; é«˜ä¼˜å…ˆçº§é¡¹ç›®
(supertag-search '(and (tag "project")
                       (field "priority" "high")))

;; æœªè¯»è®ºæ–‡
(supertag-search '(and (tag "paper")
                       (field "status" "unread")))
```

## ğŸ”„ 4.x è¿ç§»

1. `M-x load-file RET supertag-migration.el RET`
2. `M-x supertag-migrate-database-to-new-arch RET`
3. é‡å¯ Emacs

## ğŸ”„ å±æ€§è½¬å­—æ®µè¿ç§»

**å°† Org å±æ€§è½¬æ¢ä¸ºç»“æ„åŒ–å­—æ®µ**

Org-SuperTag 5.3 å¼•å…¥äº†å¼ºå¤§çš„è¿ç§»ç³»ç»Ÿï¼Œå¯ä»¥å°†ç°æœ‰çš„ Org `:PROPERTIES:` æŠ½å±‰è½¬æ¢ä¸ºç»“æ„åŒ–çš„æ•°æ®åº“å­—æ®µã€‚è¿™å®ç°äº†æ›´å¥½çš„æŸ¥è¯¢ã€è‡ªåŠ¨åŒ–å’Œæ•°æ®ç®¡ç†ã€‚

### ä¸¤ç§è¿ç§»è·¯å¾„

#### è·¯å¾„ 1ï¼šå·²åœ¨ä½¿ç”¨ Org-roamï¼ˆæ ‡é¢˜æœ‰ `:ID:` å±æ€§ï¼‰

å¦‚æœæ‚¨çš„ Org æ–‡ä»¶æ ‡é¢˜å·²æœ‰ `:ID:` å±æ€§ï¼š

1. **ä¸ºæ‰€æœ‰æ ‡é¢˜æ·»åŠ  ID**ï¼ˆå¦‚æœç¼ºå¤±ï¼‰ï¼š
   ```elisp
   M-x supertag-migration-add-ids-to-org-headings
   ```
   é€‰æ‹©æ‚¨çš„ Org ç›®å½•ï¼Œä¸ºæ‰€æœ‰æ ‡é¢˜æ·»åŠ  `:ID:` å±æ€§ã€‚

2. **åŒæ­¥åˆ°æ•°æ®åº“**ï¼š
   ```elisp
   M-x supertag-sync-full-rescan
   ```
   è¿™ä¼šå°†æ‰€æœ‰èŠ‚ç‚¹åŠå…¶å±æ€§å¯¼å…¥æ•°æ®åº“ã€‚

3. **è½¬æ¢å±æ€§ä¸ºå­—æ®µ**ï¼š
   ```elisp
   M-x supertag-convert-properties-to-field
   ```
   é€‰æ‹©ä¸€ä¸ªå±æ€§ï¼ˆå¦‚ "LOCATION"ï¼‰ï¼Œé€‰æ‹©/åˆ›å»ºæ ‡ç­¾ï¼Œç„¶åè½¬æ¢ã€‚

#### è·¯å¾„ 2ï¼šæœªä½¿ç”¨ Org-roamï¼ˆæ ‡é¢˜ç¼ºå°‘ `:ID:` å±æ€§ï¼‰

å¦‚æœæ‚¨çš„ Org æ–‡ä»¶æ ‡é¢˜æ²¡æœ‰ `:ID:` å±æ€§ï¼š

1. **ä¸ºæ‰€æœ‰æ ‡é¢˜æ·»åŠ  ID**ï¼š
   ```elisp
   M-x supertag-migration-add-ids-to-org-headings
   ```
   è¿™ä¼šä¸ºæ‰€æœ‰æ ‡é¢˜æ·»åŠ  `:ID:` å±æ€§ã€‚

2. **åŒæ­¥åˆ°æ•°æ®åº“**ï¼š
   ```elisp
   M-x supertag-sync-full-rescan
   ```

3. **è½¬æ¢å±æ€§ä¸ºå­—æ®µ**ï¼š
   ```elisp
   M-x supertag-convert-properties-to-field
   ```

### è½¬æ¢è¿‡ç¨‹ä¸­å‘ç”Ÿä»€ä¹ˆ

å½“æ‚¨è½¬æ¢åƒ `:LOCATION: London` è¿™æ ·çš„å±æ€§æ—¶ï¼š

1. **æ•°æ®åº“æ›´æ–°**ï¼š
   - èŠ‚ç‚¹è·å¾—æŒ‡å®šçš„æ ‡ç­¾ï¼ˆå¦‚ `#place`ï¼‰
   - å­—æ®µå€¼å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼ˆ`LOCATION = "London"`ï¼‰

2. **Org æ–‡ä»¶æ›´æ–°**ï¼š
   - æ ‡ç­¾æ’å…¥æ ‡é¢˜ï¼š`* My Heading #place`
   - å±æ€§æŠ½å±‰ä¿æŒä¸å˜ä»¥ç¡®ä¿å…¼å®¹æ€§

3. **æŸ¥è¯¢èƒ½åŠ›**ï¼š
   - æŒ‰å­—æ®µæŸ¥æ‰¾ï¼š`(field "LOCATION" "London")`
   - æŒ‰æ ‡ç­¾æŸ¥æ‰¾ï¼š`(tag "place")`
   - ç»„åˆæŸ¥è¯¢æ— ç¼å·¥ä½œ

### æ‰¹é‡è½¬æ¢

ä¸€æ¬¡è½¬æ¢å¤šä¸ªå±æ€§ï¼š

```elisp
M-x supertag-batch-convert-properties-to-fields
```

è¿™ä¼šæ˜¾ç¤ºæ¯ä¸ªå±æ€§çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œè®©æ‚¨ä¸ºæ¯ä¸ªè½¬æ¢é€‰æ‹©æ ‡ç­¾ã€‚

### è½¬æ¢å‰åçš„ç¤ºä¾‹

**è½¬æ¢å‰**ï¼š
```org
* é¡¹ç›®ä¼šè®®
:PROPERTIES:
:LOCATION: ä¼šè®®å®¤ A
:ATTENDEES: Alice, Bob, Carol
:END:
```

**è½¬æ¢å**ï¼ˆæ•°æ®åº“ä¸­ï¼‰ï¼š
- èŠ‚ç‚¹æœ‰æ ‡ç­¾ï¼š`meeting`
- å­—æ®µï¼š`LOCATION = "ä¼šè®®å®¤ A"`ï¼Œ`ATTENDEES = "Alice, Bob, Carol"`

**Org æ–‡ä»¶**ï¼š
```org
* é¡¹ç›®ä¼šè®® #meeting
:PROPERTIES:
:LOCATION: ä¼šè®®å®¤ A
:ATTENDEES: Alice, Bob, Carol
:END:
```

### ä¼˜åŠ¿

- **æ›´å¥½çš„æŸ¥è¯¢**ï¼šæŒ‰å­—æ®µå€¼æœç´¢ï¼Œè€Œä¸ä»…ä»…æ˜¯æ–‡æœ¬
- **è‡ªåŠ¨åŒ–**ï¼šåŸºäºå­—æ®µå˜åŒ–è§¦å‘è§„åˆ™
- **æ•°æ®å®Œæ•´æ€§**ï¼šå¸¦éªŒè¯çš„ç»“æ„åŒ–æ•°æ®
- **è§†å›¾**ï¼šè¡¨æ ¼è§†å›¾è‡ªåŠ¨æ˜¾ç¤ºå­—æ®µåˆ—
- **å‘åå…¼å®¹**ï¼šåŸå§‹å±æ€§ä¿æŒå®Œæ•´

## âš™ï¸ é…ç½®

```emacs-lisp
;; å• Vaultï¼ˆæ¨èï¼‰
(setq org-supertag-sync-directories '("~/notes/"))

;; å¤š Vaultï¼ˆæ¯ä¸ªç›®å½•ç‹¬ç«‹ DB/stateï¼‰
;; (setq org-supertag-sync-directories '("~/notes/" "~/work-notes/"))
;; (setq org-supertag-sync-directories-mode 'vaults)
```

è¯´æ˜ï¼š
- é»˜è®¤ä¸ä¼šéšæ–‡ä»¶è‡ªåŠ¨åˆ‡æ¢æ´»è·ƒ Vaultï¼ˆé¿å…é¢‘ç¹ IO/é‡è½½ï¼‰ã€‚éœ€è¦æ—¶å¯è®¾ç½® `(setq org-supertag-vault-auto-switch t)`ã€‚
- mode line ä¼šæ˜¾ç¤º `ST[<vault>]` æç¤ºå½“å‰æ–‡ä»¶å±äºå“ªä¸ª Vaultã€‚
- ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œ `M-x supertag-vault-activate` åˆ‡æ¢ã€‚

---

_ä¸º Emacs ç”¨æˆ·è®¾è®¡çš„ Notion çº§çŸ¥è¯†ç®¡ç†_

## ğŸ†š å’Œ org-roam / denote çš„åŒºåˆ«

| å·¥å…· | æ›´æ“…é•¿ | Org-SuperTag çš„å·®å¼‚ |
| --- | --- | --- |
| org-roam | åŒé“¾/åå‘é“¾æ¥/çŸ¥è¯†å›¾è°± | Org-SuperTag æ›´å **ç»“æ„åŒ–ä¸æŸ¥è¯¢**ï¼šæ ‡ç­¾å³è¡¨ã€å­—æ®µã€æ•°æ®åº“æŸ¥è¯¢ä¸è§†å›¾ï¼›åŒæ—¶ä¹Ÿæœ‰å¾ˆå¼ºçš„å¼•ç”¨ç³»ç»Ÿï¼ˆ`supertag-add-reference`ï¼‰ï¼Œå¹¶å¯åœ¨èŠ‚ç‚¹/è¡¨æ ¼è§†å›¾ä¸­é€è§†å¼•ç”¨å…³ç³»ã€‚ |
| denote | æç®€ã€æ–‡ä»¶ä¸ºä¸­å¿ƒçš„ç¬”è®°ç®¡ç† | Org-SuperTag å¢åŠ  **æ•°æ®åº“å±‚**ï¼šå­—æ®µã€å¤æ‚æŸ¥è¯¢ä¸è§†å›¾ï¼›denote åˆ™åˆ»æ„ä¿æŒè½»é‡ä¸çº¯æ–‡ä»¶ç»„ç»‡ã€‚ |
